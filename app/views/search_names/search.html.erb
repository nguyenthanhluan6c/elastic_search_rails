<%= form_for :term, url: search_names_path, method: :get do |form| %>
  <p>
    <%= text_field_tag :name_term, params[:name_term] %>
    <%= submit_tag "Search", name: nil %>
  </p>
<% end %>

<h1>Search Results of <%= params[:name_term] %></h1>

<% if @people %>
  <ul class="search_results">
    <% @people.each do |person| %>
      <li>
        <h3>
          <%= link_to person.try(:highlight).try(:name) ?
              person.highlight.name[0].html_safe : person.name,
              controller: "people", action: "show", id: person._id %>
        </h3>
        <% if person.try(:highlight).try(:first_name) %>
          <% person.highlight.first_name.each do |snippet| %>
            <p><%= snippet.html_safe %>...</p>
          <% end %>
        <% end %>

        <% if person.try(:highlight).try(:last_name) %>
          <% person.highlight.last_name.each do |snippet| %>
            <p><%= snippet.html_safe %>...</p>
          <% end %>
        <% end %>
    </li>
  <% end %>
</ul>
<% else %>
  <p>Your search did not match any documents.</p>
<% end %>
